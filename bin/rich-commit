#!/usr/bin/env node
const { program } = require('commander');
const shell = require('shelljs');
const chalk = require('chalk');
const { prefixReg } = require('../lib/regex')


program
  .usage('<message> [message]')
  .option('-m, --message',  'commit message')


 program.on('--help', () => {
  console.log()
  console.log(chalk.gray('    # create git\'s new branch'))
  console.log('    $ rich branch feature-f1')
  console.log()
})

function help () {
 program.parse(process.argv)
 if (program.args.length < 1) return program.help()
}
help()

const options = program.opts();
let message = program.args[0]; // 模版名称

process.on('exit', () => {
  console.log()
})

function run () {
  const command = options.message ? '-m' : ''
  shell.exec(`git commit ${command} '${message}'`)
}
run()