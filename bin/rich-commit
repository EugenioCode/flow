#!/usr/bin/env node
const { program } = require('commander');
const shell = require('shelljs');
const chalk = require('chalk');

program
  .name('rich')
  .usage('commit [-m] [message]')
  .option('-m, --message',  'commit message')
  .on('--help', () => {
    console.log('  Examples:')
    console.log()
    console.log(chalk.gray('    # submit git code once'))
    console.log('    $ rich commit -m "one commit"')
    console.log()
  })
  .on('exist', console.log)
  .parse(process.argv)

function help () {
 if (program.args.length < 1) return program.help()
}

help()

const options = program.opts();
let message = program.args[0]; // 模版名称

function run () {
  const command = options.message ? '-m' : ''
  shell.exec(`git commit ${command} '${message}'`)
}
run()